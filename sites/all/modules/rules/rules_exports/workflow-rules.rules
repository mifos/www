array ( 'rules' => array ( 'rules_notify_author_that_his_her_directory_profile_has_been_published_' => array ( '#type' => 'rule', '#set' => 'event_node_update', '#label' => 'Notify author that his/her directory profile has been published.', '#active' => 1, '#weight' => '0', '#categories' => array ( ), '#status' => 'custom', '#conditions' => array ( 0 => array ( '#weight' => 0, '#type' => 'condition', '#settings' => array ( '#argument map' => array ( 'node' => 'node', ), ), '#name' => 'rules_condition_content_is_published', '#info' => array ( 'label' => 'Updated content is published', 'label callback' => false, 'arguments' => array ( 'node' => array ( 'type' => 'node', 'label' => 'Content', ), ), 'module' => 'Node', ), ), 1 => array ( '#info' => array ( 'label' => 'Original content was published', 'label callback' => false, 'arguments' => array ( 'node' => array ( 'type' => 'node', 'label' => 'Content', ), ), 'module' => 'Node', ), '#name' => 'rules_condition_content_is_published', '#settings' => array ( '#argument map' => array ( 'node' => 'node_unchanged', ), ), '#type' => 'condition', '#negate' => 1, '#weight' => 0, ), ), '#actions' => array ( 0 => array ( '#weight' => 0, '#type' => 'action', '#settings' => array ( 'from' => '', 'subject' => 'Your directory profile has been published', 'message' => 'Your directory profile "[node:field_organization-raw]" has been published and can be seen on the Directory page. You can view the directory profile at [node:node-url]. ', '#argument map' => array ( 'user' => 'author_unchanged', ), '#eval input' => array ( 'token_rules_input_evaluator' => array ( 'message' => array ( 0 => 'node', ), ), ), ), '#name' => 'rules_action_mail_to_user', '#info' => array ( 'label' => 'Send email to profile\'s author', 'label callback' => false, 'arguments' => array ( 'user' => array ( 'type' => 'user', 'label' => 'Recipient', ), ), 'module' => 'System', 'eval input' => array ( 0 => 'subject', 1 => 'message', 2 => 'from', ), ), ), ), '#version' => 6003, ), 'rules_notify_profile_admin_submitted_profile' => array ( '#type' => 'rule', '#set' => 'event_node_insert', '#label' => 'Notify Profile Administrators that new directory profile has been submitted', '#active' => 1, '#weight' => '0', '#categories' => array ( 0 => 'profile administration', ), '#status' => 'custom', '#conditions' => array ( 0 => array ( '#weight' => 0, '#info' => array ( 'label' => 'Created content is Directory Profile', 'arguments' => array ( 'node' => array ( 'type' => 'node', 'label' => 'Content', ), ), 'module' => 'Node', ), '#name' => 'rules_condition_content_is_type', '#settings' => array ( 'type' => array ( 'directory_profile' => 'directory_profile', ), '#argument map' => array ( 'node' => 'node', ), ), '#type' => 'condition', ), 1 => array ( '#type' => 'condition', '#settings' => array ( 'roles' => array ( 0 => 4, 1 => 5, ), 'operation' => 'OR', '#argument map' => array ( 'user' => 'user', ), ), '#name' => 'rules_condition_user_hasrole', '#info' => array ( 'label' => 'User has role MFI or Specialist', 'label callback' => false, 'arguments' => array ( 'user' => array ( 'type' => 'user', 'label' => 'User', ), ), 'module' => 'User', ), '#weight' => 0, ), ), '#actions' => array ( 0 => array ( '#weight' => 0, '#info' => array ( 'label' => 'Log to watchdog', 'module' => 'System', 'eval input' => array ( 0 => 'type', 1 => 'message', 2 => 'link', ), ), '#name' => 'rules_action_watchdog', '#settings' => array ( 'severity' => '5', 'type' => 'rules', 'message' => 'User [author:user] has submitted Directory Profile "[node:title]" for review and publication. URL is [node:node-url]', 'link' => '', '#eval input' => array ( 'token_rules_input_evaluator' => array ( 'message' => array ( 0 => 'node', 1 => 'author', ), ), ), ), '#type' => 'action', ), 1 => array ( '#weight' => 0, '#type' => 'action', '#settings' => array ( 'recipients' => array ( 0 => 8, ), 'from' => '', 'subject' => 'New Directory Profile has been submitted', 'message' => 'User [author:user] has created and submitted new directory profile "[node:title]". Please review content at [node:node-url]. If acceptable, set Publishing Options to "Published" and save the content. The author will be notified by email. If the directory profile needs work, you can send comments to the author at [author:mail]. ', '#eval input' => array ( 'token_rules_input_evaluator' => array ( 'message' => array ( 0 => 'node', 1 => 'author', ), ), ), ), '#name' => 'rules_action_mail_to_users_of_role', '#info' => array ( 'label' => 'Send a mail to all users of a role', 'module' => 'System', 'eval input' => array ( 0 => 'subject', 1 => 'message', 2 => 'from', ), ), ), ), '#version' => 6003, ), ), )